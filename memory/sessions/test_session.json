{
  "finetuner": {
    "message": "Fine-tuning package created with scripts for data preparation, validation, job submission, and monitoring.",
    "config": {
      "model": "gpt-3.5-turbo",
      "dataset": "data/train.jsonl",
      "n_epochs": 3,
      "batch_size": 4,
      "learning_rate": 0.0002,
      "suffix": "20250405_113724",
      "created_at": "2025-04-05T11:37:24.476307"
    },
    "files": {
      "fine_tuning/scripts/fine_tune.sh": "#!/bin/bash\n# Fine-tuning script for gpt-3.5-turbo on data/train.jsonl\n# Generated by Sankalpa Finetuner Agent\n\nset -e  # Exit on any error\n\n# Load configuration\nCONFIG_FILE=\"fine_tuning/configs/config_20250405_113724.json\"\necho \"Loading configuration from $CONFIG_FILE\"\nMODEL=$(jq -r '.model' \"$CONFIG_FILE\")\nDATASET=$(jq -r '.dataset' \"$CONFIG_FILE\")\nSUFFIX=$(jq -r '.suffix' \"$CONFIG_FILE\")\n\n# Check if OpenAI API key is set\nif [ -z \"$OPENAI_API_KEY\" ]; then\n    echo \"Error: OPENAI_API_KEY environment variable is not set.\"\n    echo \"Please set your API key with: export OPENAI_API_KEY=your_api_key\"\n    exit 1\nfi\n\n# Validate dataset\nif [ \"True\" = \"True\" ]; then\n    echo \"Validating dataset: $DATASET\"\n    python fine_tuning/scripts/validate_data.py \"$DATASET\"\n    if [ $? -ne 0 ]; then\n        echo \"Data validation failed. Please fix your dataset before proceeding.\"\n        exit 1\n    fi\nfi\n\necho \"Starting fine-tuning job...\"\necho \"Model: $MODEL\"\necho \"Dataset: $DATASET\"\necho \"Suffix: $SUFFIX\"\n\n# Start fine-tuning\nif [[ \"$MODEL\" == gpt-3.5* ]] || [[ \"$MODEL\" == gpt-4* ]]; then\n    # Fine-tune ChatGPT models using chat format\n    echo \"Creating fine-tuning job for ChatGPT model...\"\n    openai api fine_tuning.create \\\n        --training_file \"$DATASET\" \\\n        --model \"$MODEL\" \\\n        --suffix \"$SUFFIX\" \\\n        --n_epochs 3 \\\n        --batch_size 4 \\\n        --learning_rate_multiplier 0.0002\nelse\n    # Fall back to legacy fine-tuning for other models\n    echo \"Creating legacy fine-tuning job...\"\n    openai api fine_tunes.create \\\n        --training_file \"$DATASET\" \\\n        --model \"$MODEL\" \\\n        --suffix \"$SUFFIX\" \\\n        --n_epochs 3\nfi\n\necho \"Fine-tuning job submitted successfully!\"\necho \"You can check the status of your fine-tuning jobs with:\"\necho \"openai api fine_tuning.list\"\n",
      "fine_tuning/scripts/validate_data.py": "#!/usr/bin/env python3\nimport json\nimport sys\n\ndef validate_jsonl(file_path):\n    print(\"Validating file:\", file_path)\n    line_number = 0\n    valid = True\n    errors = []\n\n    with open(file_path, 'r') as f:\n        for line_number, line in enumerate(f, 1):\n            try:\n                # Parse JSON\n                data = json.loads(line)\n                \n                # Check required fields\n                if not ('messages' in data or ('prompt' in data and 'completion' in data)):\n                    errors.append(f\"Line {line_number}: Missing required fields\")\n                    valid = False\n                    \n            except json.JSONDecodeError as e:\n                errors.append(f\"Line {line_number}: Invalid JSON - {str(e)}\")\n                valid = False\n                \n    if valid:\n        print(f\"\u2705 Validation passed! Processed {line_number} examples.\")\n        return True\n    else:\n        print(f\"\u274c Validation failed with {len(errors)} errors:\")\n        for error in errors:\n            print(f\"  - {error}\")\n        return False\n\nif __name__ == \"__main__\":\n    if len(sys.argv) != 2:\n        print(\"Usage: python validate_data.py <path_to_jsonl>\")\n        sys.exit(1)\n        \n    if validate_jsonl(sys.argv[1]):\n        sys.exit(0)\n    else:\n        sys.exit(1)\n",
      "fine_tuning/scripts/monitor_jobs.sh": "#!/bin/bash\n# Script to monitor fine-tuning jobs\n\nif [ -z \"$OPENAI_API_KEY\" ]; then\n    echo \"Error: OPENAI_API_KEY environment variable is not set.\"\n    echo \"Please set your API key with: export OPENAI_API_KEY=your_api_key\"\n    exit 1\nfi\n\necho \"Fetching active fine-tuning jobs...\"\nopenai api fine_tuning.list --limit 10\n\necho \"\"\necho \"To check details of a specific job, run:\"\necho \"openai api fine_tuning.get -i <job_id>\"\n\necho \"\"\necho \"To stream events from a job, run:\"\necho \"openai api fine_tuning.events -i <job_id> --stream\"\n",
      "fine_tuning/scripts/convert_data.py": "#!/usr/bin/env python3\nimport json\nimport csv\nimport argparse\n\ndef convert_csv_to_jsonl(csv_file, jsonl_file, format_type=\"chat\"):\n    # Convert a CSV file to JSONL format for fine-tuning\n    print(f\"Converting {csv_file} to {jsonl_file} in {format_type} format\")\n    \n    with open(csv_file, 'r', encoding='utf-8') as infile:\n        with open(jsonl_file, 'w', encoding='utf-8') as outfile:\n            reader = csv.DictReader(infile)\n            \n            for row in reader:\n                if format_type == \"chat\":\n                    # Chat format (for newer models)\n                    system_content = row.get('system', 'You are a helpful AI assistant.')\n                    user_content = row.get('user', '')\n                    assistant_content = row.get('assistant', '')\n                    \n                    chat_example = {\n                        \"messages\": [\n                            {\"role\": \"system\", \"content\": system_content},\n                            {\"role\": \"user\", \"content\": user_content},\n                            {\"role\": \"assistant\", \"content\": assistant_content}\n                        ]\n                    }\n                    json.dump(chat_example, outfile)\n                    outfile.write('\\n')\n                else:\n                    # Completion format (for older models)\n                    prompt = row.get('prompt', '')\n                    completion = row.get('completion', '')\n                    \n                    completion_example = {\n                        \"prompt\": prompt,\n                        \"completion\": completion\n                    }\n                    json.dump(completion_example, outfile)\n                    outfile.write('\\n')\n\ndef main():\n    parser = argparse.ArgumentParser(description='Convert CSV to JSONL for OpenAI fine-tuning')\n    parser.add_argument('csv_file', help='Path to input CSV file')\n    parser.add_argument('jsonl_file', help='Path to output JSONL file')\n    parser.add_argument('--format', choices=['chat', 'completion'], default='chat',\n                        help='Format type: chat (for ChatGPT) or completion (for older models)')\n    \n    args = parser.parse_args()\n    convert_csv_to_jsonl(args.csv_file, args.jsonl_file, args.format)\n    print(f\"Conversion complete! Created {args.jsonl_file}\")\n\nif __name__ == \"__main__\":\n    main()\n",
      "fine_tuning/configs/config_20250405_113724.json": "{\n  \"model\": \"gpt-3.5-turbo\",\n  \"dataset\": \"data/train.jsonl\",\n  \"n_epochs\": 3,\n  \"batch_size\": 4,\n  \"learning_rate\": 0.0002,\n  \"suffix\": \"20250405_113724\",\n  \"created_at\": \"2025-04-05T11:37:24.476307\"\n}"
    },
    "instructions": [
      "1. Place your training data in JSONL format at 'data/train.jsonl'",
      "2. Set your OpenAI API key: export OPENAI_API_KEY=your_key",
      "3. Run the validation script: python fine_tuning/scripts/validate_data.py data/train.jsonl",
      "4. Start fine-tuning: bash fine_tuning/scripts/fine_tune.sh",
      "5. Monitor your jobs: bash fine_tuning/scripts/monitor_jobs.sh"
    ]
  },
  "vs_code_extension": {
    "message": "Enhanced VS Code extension generated with full TypeScript implementation, UI components, and publishing workflow.",
    "files": {
      "vscode-extension/package.json": "{\n  \"name\": \"sankalpa-extension\",\n  \"displayName\": \"Sankalpa AI Agents\",\n  \"description\": \"Integrate Sankalpa AI agents directly in your editor\",\n  \"publisher\": \"sankalpa\",\n  \"version\": \"0.1.0\",\n  \"engines\": {\n    \"vscode\": \"^1.60.0\"\n  },\n  \"categories\": [\n    \"Other\",\n    \"Machine Learning\",\n    \"Snippets\",\n    \"Programming Languages\"\n  ]],\n  \"activationEvents\": [\n    \"onCommand:sankalpa.run\",\n    \"onCommand:sankalpa.runChain\",\n    \"onCommand:sankalpa.createAgent\",\n    \"onCommand:sankalpa.showMemory\",\n    \"onCommand:sankalpa.openComposer\",\n    \"onView:sankalpaAgents\"\n  ],\n  \"main\": \"./dist/extension.js\",\n  \"contributes\": {\n    \"commands\": [\n      {\n        \"command\": \"sankalpa.run\",\n        \"title\": \"Sankalpa: Run Agent\"\n      },\n      {\n        \"command\": \"sankalpa.runChain\",\n        \"title\": \"Sankalpa: Run Agent Chain\"\n      },\n      {\n        \"command\": \"sankalpa.createAgent\",\n        \"title\": \"Sankalpa: Create New Agent\"\n      },\n      {\n        \"command\": \"sankalpa.showMemory\",\n        \"title\": \"Sankalpa: Show Agent Memory\"\n      },\n      {\n        \"command\": \"sankalpa.openComposer\",\n        \"title\": \"Sankalpa: Open Workflow Composer\"\n      }\n    ],\n    \"viewsContainers\": {\n      \"activitybar\": [\n        {\n          \"id\": \"sankalpa-sidebar\",\n          \"title\": \"Sankalpa AI\",\n          \"icon\": \"resources/icon.svg\"\n        }\n      ]\n    },\n    \"views\": {\n      \"sankalpa-sidebar\": [\n        {\n          \"id\": \"sankalpaAgents\",\n          \"name\": \"Available Agents\"\n        },\n        {\n          \"id\": \"sankalpaWorkflows\",\n          \"name\": \"Workflows\"\n        },\n        {\n          \"id\": \"sankalpaMemory\",\n          \"name\": \"Agent Memory\"\n        }\n      ]\n    },\n    \"menus\": {\n      \"editor/context\": [\n        {\n          \"command\": \"sankalpa.run\",\n          \"group\": \"sankalpa\"\n        }\n      ],\n      \"view/title\": [\n        {\n          \"command\": \"sankalpa.createAgent\",\n          \"when\": \"view == sankalpaAgents\",\n          \"group\": \"navigation\"\n        }\n      ]\n    },\n    \"configuration\": {\n      \"title\": \"Sankalpa\",\n      \"properties\": {\n        \"sankalpa.apiEndpoint\": {\n          \"type\": \"string\",\n          \"default\": \"http://localhost:8000\",\n          \"description\": \"The Sankalpa API endpoint URL\"\n        },\n        \"sankalpa.pythonPath\": {\n          \"type\": \"string\",\n          \"default\": \"python3\",\n          \"description\": \"Path to Python executable for CLI commands\"\n        },\n        \"sankalpa.cliPath\": {\n          \"type\": \"string\",\n          \"default\": \"cli/cli.py\",\n          \"description\": \"Path to Sankalpa CLI script\"\n        }\n      }\n    }\n  },\n  \"scripts\": {\n    \"vscode:prepublish\": \"npm run package\",\n    \"compile\": \"webpack\",\n    \"watch\": \"webpack --watch\",\n    \"package\": \"webpack --mode production --devtool hidden-source-map\",\n    \"lint\": \"eslint src --ext ts\",\n    \"test\": \"jest\"\n  },\n  \"devDependencies\": {\n    \"@types/glob\": \"^7.1.4\",\n    \"@types/node\": \"^16.11.7\",\n    \"@types/vscode\": \"^1.60.0\",\n    \"@typescript-eslint/eslint-plugin\": \"^5.30.0\",\n    \"@typescript-eslint/parser\": \"^5.30.0\",\n    \"eslint\": \"^8.13.0\",\n    \"ts-loader\": \"^9.3.1\",\n    \"typescript\": \"^4.7.4\",\n    \"webpack\": \"^5.76.0\",\n    \"webpack-cli\": \"^4.10.0\"\n  },\n  \"dependencies\": {\n    \"axios\": \"^0.27.2\"\n  }\n}\n",
      "vscode-extension/tsconfig.json": "{\n  \"compilerOptions\": {\n    \"module\": \"commonjs\",\n    \"target\": \"ES2020\",\n    \"outDir\": \"dist\",\n    \"lib\": [\"ES2020\"],\n    \"sourceMap\": true,\n    \"rootDir\": \"src\",\n    \"strict\": true\n  },\n  \"exclude\": [\"node_modules\", \".vscode-test\"]\n}\n",
      "vscode-extension/src/extension.ts": "import * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport axios from 'axios';\nimport { exec } from 'child_process';\nimport { promisify } from 'util';\n\nconst execAsync = promisify(exec);\n\ninterface Agent {\n  id: string;\n  name: string;\n  description: string;\n  category: string;\n}\n\ninterface AgentOutputChannel {\n  channel: vscode.OutputChannel;\n  showing: boolean;\n}\n\nexport async function activate(context: vscode.ExtensionContext) {\n  console.log('Sankalpa extension is now active');\n  \n  // Setup API client\n  const getApiEndpoint = () => {\n    return vscode.workspace.getConfiguration('sankalpa').get('apiEndpoint') as string;\n  };\n\n  // Setup output channel for agent results\n  const outputChannels: Map<string, AgentOutputChannel> = new Map();\n  \n  const getAgentOutputChannel = (agentName: string): AgentOutputChannel => {\n    if (!outputChannels.has(agentName)) {\n      outputChannels.set(agentName, {\n        channel: vscode.window.createOutputChannel(`Sankalpa: ${agentName}`),\n        showing: false\n      });\n    }\n    return outputChannels.get(agentName)!;\n  };\n  \n  // Agent data provider for the sidebar\n  class AgentDataProvider implements vscode.TreeDataProvider<AgentItem> {\n    private _onDidChangeTreeData: vscode.EventEmitter<AgentItem | undefined | null | void> = new vscode.EventEmitter<AgentItem | undefined | null | void>();\n    readonly onDidChangeTreeData: vscode.Event<AgentItem | undefined | null | void> = this._onDidChangeTreeData.event;\n    \n    private _agents: Agent[] = [];\n    \n    constructor() {\n      this.refreshAgents();\n    }\n    \n    async refreshAgents() {\n      try {\n        const response = await axios.get(`${getApiEndpoint()}/agents`);\n        this._agents = response.data;\n        this._onDidChangeTreeData.fire();\n      } catch (error) {\n        console.error('Failed to fetch agents:', error);\n        this._agents = [];\n        this._onDidChangeTreeData.fire();\n      }\n    }\n    \n    getTreeItem(element: AgentItem): vscode.TreeItem {\n      return element;\n    }\n    \n    getChildren(element?: AgentItem): Thenable<AgentItem[]> {\n      if (element) {\n        return Promise.resolve([]);\n      }\n      \n      return Promise.resolve(this._agents.map(agent => new AgentItem(\n        agent.name,\n        agent.description,\n        agent.category,\n        vscode.TreeItemCollapsibleState.None,\n        {\n          command: 'sankalpa.run',\n          title: 'Run Agent',\n          arguments: [agent.id]\n        }\n      )));\n    }\n  }\n  \n  class AgentItem extends vscode.TreeItem {\n    constructor(\n      public readonly label: string,\n      public readonly description: string,\n      public readonly category: string,\n      public readonly collapsibleState: vscode.TreeItemCollapsibleState,\n      public readonly command?: vscode.Command\n    ) {\n      super(label, collapsibleState);\n      this.tooltip = `${description}\\nCategory: ${category}`;\n      this.contextValue = 'agent';\n    }\n    \n    iconPath = {\n      light: path.join(__filename, '..', '..', 'resources', 'light', 'agent.svg'),\n      dark: path.join(__filename, '..', '..', 'resources', 'dark', 'agent.svg')\n    };\n  }\n  \n  const agentDataProvider = new AgentDataProvider();\n  vscode.window.registerTreeDataProvider('sankalpaAgents', agentDataProvider);\n  \n  // Command: Run Agent\n  const runAgentCommand = async (agentId?: string) => {\n    try {\n      if (!agentId) {\n        const agents = await axios.get(`${getApiEndpoint()}/agents`);\n        const agentNames = agents.data.map((agent: Agent) => ({\n          label: agent.name,\n          description: agent.description,\n          id: agent.id\n        }));\n        \n        const selectedAgent = await vscode.window.showQuickPick(agentNames, {\n          placeHolder: 'Select an agent to run'\n        });\n        \n        if (!selectedAgent) {\n          return;\n        }\n        \n        agentId = selectedAgent.id;\n      }\n      \n      // Get input from user\n      const input = await vscode.window.showInputBox({\n        prompt: 'Enter input for the agent',\n        placeHolder: 'Agent input'\n      });\n      \n      if (input === undefined) {\n        return;\n      }\n      \n      // Get selected text if any\n      let selectedText = '';\n      const editor = vscode.window.activeTextEditor;\n      if (editor) {\n        const selection = editor.selection;\n        if (!selection.isEmpty) {\n          selectedText = editor.document.getText(selection);\n        }\n      }\n      \n      // Show progress\n      await vscode.window.withProgress({\n        location: vscode.ProgressLocation.Notification,\n        title: `Running Sankalpa agent: ${agentId}`,\n        cancellable: true\n      }, async (progress, token) => {\n        progress.report({ increment: 0 });\n        \n        try {\n          // Try the API first\n          const response = await axios.post(`${getApiEndpoint()}/agents/${agentId}/run`, {\n            input: input,\n            selected_text: selectedText\n          });\n          \n          progress.report({ increment: 100 });\n          \n          // Show output\n          const outputChannel = getAgentOutputChannel(agentId);\n          outputChannel.channel.clear();\n          outputChannel.channel.appendLine(`Agent: ${agentId}`);\n          outputChannel.channel.appendLine(`Input: ${input}`);\n          outputChannel.channel.appendLine('\\nResult:');\n          outputChannel.channel.appendLine(JSON.stringify(response.data, null, 2));\n          \n          if (!outputChannel.showing) {\n            outputChannel.channel.show();\n            outputChannel.showing = true;\n          }\n          \n          // If there are generated files, offer to open them\n          if (response.data.files && Object.keys(response.data.files).length > 0) {\n            const openFiles = await vscode.window.showQuickPick(\n              ['Yes', 'No'],\n              { placeHolder: 'Open generated files?' }\n            );\n            \n            if (openFiles === 'Yes') {\n              for (const filePath of Object.keys(response.data.files)) {\n                const uri = vscode.Uri.file(path.resolve(filePath));\n                const doc = await vscode.workspace.openTextDocument(uri);\n                await vscode.window.showTextDocument(doc);\n              }\n            }\n          }\n          \n        } catch (error) {\n          // Fall back to CLI\n          try {\n            const pythonPath = vscode.workspace.getConfiguration('sankalpa').get('pythonPath') as string;\n            const cliPath = vscode.workspace.getConfiguration('sankalpa').get('cliPath') as string;\n            \n            // Escape the input for CLI\n            const escapedInput = input.replace(/\"/g, '\\\\\"');\n            \n            const { stdout, stderr } = await execAsync(\n              `${pythonPath} ${cliPath} run-agent ${agentId} \"${escapedInput}\"`\n            );\n            \n            progress.report({ increment: 100 });\n            \n            // Show output\n            const outputChannel = getAgentOutputChannel(agentId);\n            outputChannel.channel.clear();\n            outputChannel.channel.appendLine(`Agent: ${agentId}`);\n            outputChannel.channel.appendLine(`Input: ${input}`);\n            outputChannel.channel.appendLine('\\nResult (via CLI):');\n            outputChannel.channel.appendLine(stdout);\n            \n            if (stderr) {\n              outputChannel.channel.appendLine('\\nErrors:');\n              outputChannel.channel.appendLine(stderr);\n            }\n            \n            if (!outputChannel.showing) {\n              outputChannel.channel.show();\n              outputChannel.showing = true;\n            }\n            \n          } catch (cliError: any) {\n            vscode.window.showErrorMessage(`Failed to run agent via CLI: ${cliError.message}`);\n          }\n        }\n      });\n      \n    } catch (error: any) {\n      vscode.window.showErrorMessage(`Error running agent: ${error.message}`);\n    }\n  };\n  \n  // Command: Run Agent Chain\n  const runChainCommand = async () => {\n    try {\n      // Get agents\n      const agents = await axios.get(`${getApiEndpoint()}/agents`);\n      const agentItems = agents.data.map((agent: Agent) => ({\n        label: agent.name,\n        description: agent.description,\n        id: agent.id\n      }));\n      \n      // Multi-select agents for chain\n      const selectedAgents = await vscode.window.showQuickPick(agentItems, {\n        placeHolder: 'Select agents for the chain',\n        canPickMany: true\n      });\n      \n      if (!selectedAgents || selectedAgents.length === 0) {\n        return;\n      }\n      \n      // Get chain input\n      const input = await vscode.window.showInputBox({\n        prompt: 'Enter input for the agent chain',\n        placeHolder: 'Chain input'\n      });\n      \n      if (input === undefined) {\n        return;\n      }\n      \n      // Get selected text if any\n      let selectedText = '';\n      const editor = vscode.window.activeTextEditor;\n      if (editor) {\n        const selection = editor.selection;\n        if (!selection.isEmpty) {\n          selectedText = editor.document.getText(selection);\n        }\n      }\n      \n      // Show progress\n      await vscode.window.withProgress({\n        location: vscode.ProgressLocation.Notification,\n        title: 'Running Sankalpa agent chain',\n        cancellable: true\n      }, async (progress, token) => {\n        progress.report({ increment: 0 });\n        \n        try {\n          // Try API first\n          const agentIds = selectedAgents.map(a => a.id);\n          const response = await axios.post(`${getApiEndpoint()}/chains/run`, {\n            agents: agentIds,\n            input: input,\n            selected_text: selectedText\n          });\n          \n          progress.report({ increment: 100 });\n          \n          // Show output\n          const outputChannel = getAgentOutputChannel('Chain');\n          outputChannel.channel.clear();\n          outputChannel.channel.appendLine(`Chain: ${agentIds.join(' -> ')}`);\n          outputChannel.channel.appendLine(`Input: ${input}`);\n          outputChannel.channel.appendLine('\\nResult:');\n          outputChannel.channel.appendLine(JSON.stringify(response.data, null, 2));\n          \n          if (!outputChannel.showing) {\n            outputChannel.channel.show();\n            outputChannel.showing = true;\n          }\n          \n        } catch (error) {\n          // Fall back to CLI\n          try {\n            const pythonPath = vscode.workspace.getConfiguration('sankalpa').get('pythonPath') as string;\n            const cliPath = vscode.workspace.getConfiguration('sankalpa').get('cliPath') as string;\n            \n            // Escape the input for CLI\n            const escapedInput = input.replace(/\"/g, '\\\\\"');\n            const agentIds = selectedAgents.map(a => a.id).join(' ');\n            \n            const { stdout, stderr } = await execAsync(\n              `${pythonPath} ${cliPath} run-chain ${agentIds} \"${escapedInput}\"`\n            );\n            \n            progress.report({ increment: 100 });\n            \n            // Show output\n            const outputChannel = getAgentOutputChannel('Chain');\n            outputChannel.channel.clear();\n            outputChannel.channel.appendLine(`Chain: ${agentIds}`);\n            outputChannel.channel.appendLine(`Input: ${input}`);\n            outputChannel.channel.appendLine('\\nResult (via CLI):');\n            outputChannel.channel.appendLine(stdout);\n            \n            if (stderr) {\n              outputChannel.channel.appendLine('\\nErrors:');\n              outputChannel.channel.appendLine(stderr);\n            }\n            \n            if (!outputChannel.showing) {\n              outputChannel.channel.show();\n              outputChannel.showing = true;\n            }\n            \n          } catch (cliError: any) {\n            vscode.window.showErrorMessage(`Failed to run chain via CLI: ${cliError.message}`);\n          }\n        }\n      });\n      \n    } catch (error: any) {\n      vscode.window.showErrorMessage(`Error running agent chain: ${error.message}`);\n    }\n  };\n  \n  // Command: Create New Agent\n  const createAgentCommand = async () => {\n    try {\n      // Get agent details from user\n      const name = await vscode.window.showInputBox({\n        prompt: 'Enter agent name (lowercase, underscore separated)',\n        placeHolder: 'custom_agent',\n        validateInput: (value) => {\n          if (!/^[a-z][a-z0-9_]*$/.test(value)) {\n            return 'Agent name must be lowercase, start with a letter, and contain only letters, numbers, and underscores';\n          }\n          return null;\n        }\n      });\n      \n      if (!name) {\n        return;\n      }\n      \n      const description = await vscode.window.showInputBox({\n        prompt: 'Enter agent description',\n        placeHolder: 'A custom agent that...'\n      });\n      \n      if (!description) {\n        return;\n      }\n      \n      const category = await vscode.window.showQuickPick(\n        ['custom', 'utility', 'builder', 'testing', 'deployment', 'enhanced', 'marketing'],\n        { placeHolder: 'Select agent category' }\n      );\n      \n      if (!category) {\n        return;\n      }\n      \n      // Show progress\n      await vscode.window.withProgress({\n        location: vscode.ProgressLocation.Notification,\n        title: 'Creating new agent',\n        cancellable: true\n      }, async (progress, token) => {\n        progress.report({ increment: 0 });\n        \n        try {\n          // Call the self-replicator agent\n          const response = await axios.post(`${getApiEndpoint()}/agents/self_replicator/run`, {\n            name: name,\n            description: description,\n            category: category,\n            logic: \"# TODO: Implement agent logic\\n        result = {\\n            'message': 'Hello from custom agent',\\n            'status': 'success'\\n        }\\n\"\n          });\n          \n          progress.report({ increment: 100 });\n          \n          vscode.window.showInformationMessage(`Agent '${name}' created successfully`);\n          \n          // Refresh the agent list\n          agentDataProvider.refreshAgents();\n          \n          // Offer to open the agent file\n          if (response.data.files) {\n            const agentFile = Object.keys(response.data.files).find(f => f.includes(name));\n            if (agentFile) {\n              const openFile = await vscode.window.showQuickPick(\n                ['Yes', 'No'],\n                { placeHolder: 'Open generated agent file?' }\n              );\n              \n              if (openFile === 'Yes') {\n                const uri = vscode.Uri.file(path.resolve(agentFile));\n                const doc = await vscode.workspace.openTextDocument(uri);\n                await vscode.window.showTextDocument(doc);\n              }\n            }\n          }\n          \n        } catch (error: any) {\n          vscode.window.showErrorMessage(`Failed to create agent: ${error.message}`);\n        }\n      });\n      \n    } catch (error: any) {\n      vscode.window.showErrorMessage(`Error creating agent: ${error.message}`);\n    }\n  };\n  \n  // Command: Show Agent Memory\n  const showMemoryCommand = async () => {\n    try {\n      const response = await axios.get(`${getApiEndpoint()}/memory`);\n      \n      const outputChannel = getAgentOutputChannel('Memory');\n      outputChannel.channel.clear();\n      outputChannel.channel.appendLine('Agent Memory:');\n      outputChannel.channel.appendLine(JSON.stringify(response.data, null, 2));\n      \n      if (!outputChannel.showing) {\n        outputChannel.channel.show();\n        outputChannel.showing = true;\n      }\n      \n    } catch (error: any) {\n      vscode.window.showErrorMessage(`Error fetching memory: ${error.message}`);\n    }\n  };\n  \n  // Command: Open Workflow Composer\n  const openComposerCommand = async () => {\n    try {\n      const apiEndpoint = getApiEndpoint();\n      const composerUrl = `${apiEndpoint}/composer`;\n      vscode.env.openExternal(vscode.Uri.parse(composerUrl));\n    } catch (error: any) {\n      vscode.window.showErrorMessage(`Error opening composer: ${error.message}`);\n    }\n  };\n  \n  // Register all commands\n  context.subscriptions.push(\n    vscode.commands.registerCommand('sankalpa.run', runAgentCommand),\n    vscode.commands.registerCommand('sankalpa.runChain', runChainCommand),\n    vscode.commands.registerCommand('sankalpa.createAgent', createAgentCommand),\n    vscode.commands.registerCommand('sankalpa.showMemory', showMemoryCommand),\n    vscode.commands.registerCommand('sankalpa.openComposer', openComposerCommand),\n    \n    // Refresh command for the tree view\n    vscode.commands.registerCommand('sankalpa.refreshAgents', () => {\n      agentDataProvider.refreshAgents();\n    })\n  );\n  \n  // Status bar item\n  const statusBarItem = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Right, 100);\n  statusBarItem.text = \"$(rocket) Sankalpa\";\n  statusBarItem.tooltip = \"Open Sankalpa Commands\";\n  statusBarItem.command = \"sankalpa.run\";\n  statusBarItem.show();\n  context.subscriptions.push(statusBarItem);\n  \n  // Context for when we're editing Python files\n  vscode.window.onDidChangeActiveTextEditor(editor => {\n    if (editor && editor.document.languageId === 'python') {\n      statusBarItem.show();\n    } else {\n      statusBarItem.hide();\n    }\n  });\n  \n  // Show welcome info\n  vscode.window.showInformationMessage('Sankalpa AI extension activated. Run agents from the sidebar or command palette.');\n}\n\nexport function deactivate() {\n  // Clean up resources if needed\n}\n",
      "vscode-extension/.vscode/launch.json": "{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"Launch Extension\",\n      \"type\": \"extensionHost\",\n      \"request\": \"launch\",\n      \"args\": [\"--extensionDevelopmentPath=${workspaceFolder}\"],\n      \"outFiles\": [\"${workspaceFolder}/dist/**/*.js\"],\n      \"preLaunchTask\": \"${defaultBuildTask}\"\n    }\n  ]\n}",
      "vscode-extension/.vscode/tasks.json": "{\n  \"version\": \"2.0.0\",\n  \"tasks\": [\n    {\n      \"type\": \"npm\",\n      \"script\": \"watch\",\n      \"problemMatcher\": [\"$ts-webpack-watch\"],\n      \"isBackground\": true,\n      \"presentation\": {\n        \"reveal\": \"never\"\n      },\n      \"group\": {\n        \"kind\": \"build\",\n        \"isDefault\": true\n      }\n    }\n  ]\n}",
      "vscode-extension/webpack.config.js": "const path = require('path');\n\nmodule.exports = {\n  entry: './src/extension.ts',\n  target: 'node',\n  mode: 'development',\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'extension.js',\n    libraryTarget: 'commonjs2'\n  },\n  externals: {\n    vscode: 'commonjs vscode'\n  },\n  resolve: {\n    extensions: ['.ts', '.js']\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.ts$/,\n        use: 'ts-loader'\n      }\n    ]\n  }\n};",
      "vscode-extension/resources/icon.svg": "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n  <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n  <path d=\"M8 14s1.5 2 4 2 4-2 4-2\"></path>\n  <line x1=\"9\" y1=\"9\" x2=\"9.01\" y2=\"9\"></line>\n  <line x1=\"15\" y1=\"9\" x2=\"15.01\" y2=\"9\"></line>\n</svg>",
      "vscode-extension/resources/light/agent.svg": "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n  <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n  <path d=\"M8 14s1.5 2 4 2 4-2 4-2\"></path>\n  <line x1=\"9\" y1=\"9\" x2=\"9.01\" y2=\"9\"></line>\n  <line x1=\"15\" y1=\"9\" x2=\"15.01\" y2=\"9\"></line>\n</svg>",
      "vscode-extension/resources/dark/agent.svg": "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n  <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n  <path d=\"M8 14s1.5 2 4 2 4-2 4-2\"></path>\n  <line x1=\"9\" y1=\"9\" x2=\"9.01\" y2=\"9\"></line>\n  <line x1=\"15\" y1=\"9\" x2=\"15.01\" y2=\"9\"></line>\n</svg>",
      "vscode-extension/README.md": "# Sankalpa AI Agents\n\nIntegrate Sankalpa AI agents directly in your editor\n\n## Features\n\n- Run Sankalpa AI agents directly from VS Code\n- Chain multiple agents together for complex tasks\n- Create new agents with a simple wizard\n- View agent memory and execution history\n- Open the visual workflow composer\n\n## Commands\n\n- `Sankalpa: Run Agent` - Run a single agent\n- `Sankalpa: Run Agent Chain` - Run multiple agents in sequence\n- `Sankalpa: Create New Agent` - Generate a new custom agent\n- `Sankalpa: Show Agent Memory` - View the current memory state\n- `Sankalpa: Open Workflow Composer` - Open the visual workflow editor\n\n## Requirements\n\n- Sankalpa backend service running\n- Node.js and npm for extension development\n\n## Extension Settings\n\nThis extension contributes the following settings:\n\n* `sankalpa.apiEndpoint`: The Sankalpa API endpoint URL (default: http://localhost:8000)\n* `sankalpa.pythonPath`: Path to Python executable for CLI commands (default: python3)\n* `sankalpa.cliPath`: Path to Sankalpa CLI script (default: cli/cli.py)\n\n## Getting Started\n\n1. Start the Sankalpa backend server\n2. Install the extension\n3. Configure the API endpoint in settings if needed\n4. Use the Sankalpa sidebar or command palette to run agents\n\n## Developer Notes\n\nTo build and run the extension locally:\n\n```bash\ncd vscode-extension\nnpm install\nnpm run watch\n```\n\nThen press F5 to start debugging.\n",
      "vscode-extension/.github/workflows/deploy.yml": "name: Deploy Extension\n\non:\n  push:\n    tags:\n      - 'v*'\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - uses: actions/setup-node@v2\n        with:\n          node-version: '16'\n      - run: npm ci\n      - run: npm run package\n      - name: Publish to VS Code Marketplace\n        run: npx vsce publish -p ${{ secrets.VSCE_PAT }}\n"
    },
    "instructions": "\n# VS Code Extension Setup\n\nExtension created with name: sankalpa-extension\n\n## Development Setup\n\n1. Navigate to the extension directory:\n   ```\n   cd vscode-extension\n   ```\n\n2. Install dependencies:\n   ```\n   npm install\n   ```\n\n3. Compile the extension:\n   ```\n   npm run compile\n   ```\n\n4. Package the extension:\n   ```\n   npm run package\n   ```\n\n5. Install the extension locally:\n   ```\n   code --install-extension sankalpa-extension-0.1.0.vsix\n   ```\n\n## Key Features\n\n- Sidebar with all available agents\n- Run agents with input and selected text\n- Run agent chains for complex tasks\n- Create new agents from templates\n- View memory and execution history\n- Open the visual workflow composer\n\n## Configuration\n\nConfigure the extension in VS Code settings:\n- API endpoint URL\n- Python path for CLI fallback\n- CLI script path\n"
  },
  "deploy_executor": {
    "message": "Deployment scripts and configurations generated for vercel.",
    "platform": "vercel",
    "configs": [
      "deployment/scripts/deploy_vercel.sh",
      "deployment/configs/vercel.json",
      "deployment/deploy.sh",
      "deployment/README.md"
    ],
    "files": {
      "deployment/scripts/deploy_vercel.sh": "#!/bin/bash\n# Vercel deployment script generated by Sankalpa DeployExecutorAgent\nset -e\n\n# Check if Vercel CLI is installed\nif ! command -v vercel &> /dev/null; then\n    echo \"Vercel CLI not found. Installing...\"\n    npm install -g vercel\nfi\n\n# Navigate to project directory\ncd .\n\n# Install dependencies\necho \"Installing dependencies...\"\nnpm install\n\n# Build the project\necho \"Building project...\"\nnpm run build\n\n# Set environment variables\necho \"Setting environment variables...\"\n\n\n# Deploy to production\necho \"Deploying to Vercel...\"\nvercel --prod\n\necho \"Vercel deployment completed successfully!\"\n",
      "deployment/configs/vercel.json": "{\n  \"version\": 2,\n  \"builds\": [\n    {\n      \"src\": \"package.json\",\n      \"use\": \"@vercel/next\"\n    }\n  ]\n}",
      "deployment/deploy.sh": "#!/bin/bash\n# Master deployment script for Sankalpa projects\n# This script provides a unified interface for deploying to different platforms\n\n# Load configuration\nCONFIG_FILE=\"deployment/configs/deploy_config.json\"\nif [ -f \"$CONFIG_FILE\" ]; then\n    echo \"Loading configuration from $CONFIG_FILE\"\n    PLATFORM=$(jq -r '.platform // \"vercel\"' \"$CONFIG_FILE\")\n    PROJECT_PATH=$(jq -r '.project_path // \".\"' \"$CONFIG_FILE\")\nelse\n    echo \"No configuration file found. Using defaults.\"\n    PLATFORM=\"vercel\"\n    PROJECT_PATH=\".\"\nfi\n\n# Set script directory\nSCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" && pwd)\"\n\n# Command line arguments override configuration\nif [ \"$1\" != \"\" ]; then\n    PLATFORM=\"$1\"\nfi\n\n# Check if project exists\nif [ ! -d \"$PROJECT_PATH\" ]; then\n    echo \"Error: Project directory $PROJECT_PATH does not exist.\"\n    exit 1\nfi\n\n# Display deployment information\necho \"===== SANKALPA DEPLOYMENT =====\"\necho \"Platform: $PLATFORM\"\necho \"Project directory: $PROJECT_PATH\"\necho \"==============================\"\n\n# Execute platform-specific deployment\ncase \"$PLATFORM\" in\n    vercel)\n        echo \"Deploying to Vercel...\"\n        if [ -f \"$SCRIPT_DIR/scripts/deploy_vercel.sh\" ]; then\n            bash \"$SCRIPT_DIR/scripts/deploy_vercel.sh\"\n        else\n            echo \"Error: Vercel deployment script not found.\"\n            exit 1\n        fi\n        ;;\n    netlify)\n        echo \"Deploying to Netlify...\"\n        if [ -f \"$SCRIPT_DIR/scripts/deploy_netlify.sh\" ]; then\n            bash \"$SCRIPT_DIR/scripts/deploy_netlify.sh\"\n        else\n            echo \"Error: Netlify deployment script not found.\"\n            exit 1\n        fi\n        ;;\n    aws|amazon)\n        echo \"Deploying to AWS...\"\n        if [ -f \"$SCRIPT_DIR/scripts/deploy_aws.sh\" ]; then\n            bash \"$SCRIPT_DIR/scripts/deploy_aws.sh\"\n        else\n            echo \"Error: AWS deployment script not found.\"\n            exit 1\n        fi\n        ;;\n    gcp|google)\n        echo \"Deploying to Google Cloud Platform...\"\n        if [ -f \"$SCRIPT_DIR/scripts/deploy_gcp.sh\" ]; then\n            bash \"$SCRIPT_DIR/scripts/deploy_gcp.sh\"\n        else\n            echo \"Error: GCP deployment script not found.\"\n            exit 1\n        fi\n        ;;\n    azure|microsoft)\n        echo \"Deploying to Microsoft Azure...\"\n        if [ -f \"$SCRIPT_DIR/scripts/deploy_azure.sh\" ]; then\n            bash \"$SCRIPT_DIR/scripts/deploy_azure.sh\"\n        else\n            echo \"Error: Azure deployment script not found.\"\n            exit 1\n        fi\n        ;;\n    *)\n        echo \"Error: Unsupported platform '$PLATFORM'\"\n        echo \"Supported platforms: vercel, netlify, aws, gcp, azure\"\n        exit 1\n        ;;\nesac\n\necho \"Deployment process completed.\"\n",
      "deployment/README.md": "# Deployment Guide for Vercel\n\nThis folder contains all the necessary scripts and configurations to deploy your next project to Vercel.\n\n## Prerequisites\n\n- Node.js and npm installed\n- Vercel CLI installed (`npm install -g vercel`)\n- Vercel account and logged in via CLI (`vercel login`)\n\n## Deployment Steps\n\n1. Navigate to this directory: `cd deployment`\n2. Run the deployment script: `./deploy.sh`\n3. The script will:\n   - Install dependencies\n   - Build the project\n   - Set environment variables\n   - Deploy to Vercel\n\n## Configuration\n\nYou can modify the deployment configuration in `configs/deploy_config.json`.\n\n## Custom Domain\n\nTo set up a custom domain:\n1. Go to your Vercel project dashboard\n2. Click on \"Domains\"\n3. Add your domain and follow the instructions\n\n## Environment Variables\n\nEnvironment variables are stored in the config file and will be automatically set during deployment.\n"
    }
  }
}